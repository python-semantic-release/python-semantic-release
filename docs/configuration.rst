.. _configuration:

Configuration
*************

Configuration options can be given in three ways:

- ``setup.cfg`` file in a ``[semantic_release]`` section
- ``pyproject.toml`` file in a ``[tool.semantic_release]`` section
- ``-D`` option, like so::

    semantic-release <command> -D <option_name>=<option_value>

Each location has priority over the ones listed above it.


Releases
========

.. _config-branch:

``branch``
----------
The branch to run releases from.

Default: `master`

.. _config-version_variable:

``version_variable``
--------------------
The file and variable name of where the version number is stored, for example::

    semantic_release/__init__.py:__version__

.. _config-version_source:

``version_source``
------------------
The way we get and set the new version. Can be `commit` or `tag`.

- If set to `tag`, will get the current version from the latest tag matching ``vX.Y.Z``.
  This won't change the source defined in ``version_variable``.
- If set to `commit`, will get the current version from the source defined in
  ``version_variable``, edit the file and commit it.

Default: `commit`

.. _config-commit_parser:

``commit_parser``
-----------------
Import path of a Python function that can parse commit messages and return
information about the commit as described in :ref:`commit-log-parsing`.

Default: `semantic_release.history.angular_parser`

.. _config-patch_without_tag:

``patch_without_tag``
---------------------
If this is set to `true`, semantic-release will create a new patch release even if there is
no tag in any commits since the last release.

Default: `false`

Commits
=======

.. _config-commit_version_number:

``commit_version_number``
-------------------------
Whether or not to commit changes when bumping version.

Default: True if ``version_source`` is `tag`, False if ``version_source`` is `commit`

.. _config-commit_subject:

``commit_subject``
------------------
Git commit subject line. Accepts the following variables as format fields:

================  ========
Variable          Contents
================  ========
``{version}``     The new version number in the format ``X.Y.Z``.
================  ========

Default: ``{version}``

.. _config-commit_message:

``commit_message``
------------------
Git commit message body. Accepts the following variables as format fields:

================  ========
Variable          Contents
================  ========
``{version}``     The new version number in the format ``X.Y.Z``.
================  ========

Default: `Automatically generated by python-semantic-release`

.. _config-commit_author:

``commit_author``
-----------------
Author used in commits in the format ``name <email>``.

Default: ``semantic-release <semantic-release>``

.. note::
  If you are using the built-in GitHub Action, this is always set to
  ``github-actions <actions@github.com>``.

Changelog
=========

.. _config-changelog_sections:

``changelog_sections``
-----------------------
Comma-separated list of sections to display in the changelog.
They will be displayed in the order they are given.

The available options are:

* ``feature``
* ``fix``
* ``documentation``
* ``refactor``
* ``performance``
* ``breaking``

Default: `feature, fix, breaking, documentation, performance`

.. _config-compare_link:

``compare_link``
----------------
When set to true, add a link to view the commit range since the previous
release, on GitHub. Only appears when using :ref:`cmd-publish`.

.. note::
  If you are using a different HVCS, the link will not be included
  regardless of this option.

Distributions
=============

.. _config-upload_to_pypi:

``upload_to_pypi``
------------------
If set to false the pypi uploading will be disabled.
See :ref:`env-pypi_token` which must also be set for this to work.

.. _config-upload_to_release:

``upload_to_release``
---------------------
If set to false, do not upload distributions to GitHub releases.
If you are not using GitHub, this will be skipped regardless.

.. _config-dist_path:

``dist_path``
-------------
The relative path to the folder for dists configured for setuptools. This allows for
customized setuptools processes.

Default: `dist/`

.. _config-remove_dist:

``remove_dist``
---------------
Flag for whether the dist folder should be removed after a release.

Default: `true`

.. _config-build_command:

``build_command``
-----------------
Command to build dists. Build output should be stored in the directory configured in
``dist_path``.

Default: ``python setup.py sdist bdist_wheel``

HVCS
====

.. _config-hvcs:

``hvcs``
--------
The name of your hvcs. Currently only `GitHub` and `GitLab` are supported.

Default: `github`

.. _config-check_build_status:

``check_build_status``
----------------------
If enabled, the status of the head commit will be checked and a release will only be created
if the status is success.

Default: `false`
